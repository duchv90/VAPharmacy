import{e as d,r as h,v as x,c,o as i,a,B as y,l as s,C as f,t as g,b as m}from"./--UdAa0U.js";import{u as b}from"./BD9WHlNg.js";import"./EAwOk3v9.js";const v={class:"rounded-md bg-white p-4 shadow-md"},w={class:"flex items-center space-x-4"},C=d({__name:"Upload",setup(p){const e=h(null),r=h(null),t=x({text:"",type:""}),n=()=>{r.value&&(r.value.value="")},u=l=>{const o=l.target;e.value=o.files?o.files[0]:null},_=async()=>{if(!e.value){t.text="No file selected",t.type="error";return}const l=new FormData;l.append("file",e.value);try{const o=await $fetch("/api/upload",{method:"POST",body:l});if(o&&o.success)t.text=o.message,t.type="success",e.value=null,n();else throw new Error("Error uploading file")}catch{t.text="Error uploading file",t.type="error"}};return(l,o)=>(i(),c("div",v,[o[1]||(o[1]=a("h2",{class:"mb-4 text-lg font-semibold text-gray-800"}," Bước 1: Upload file gốc: ",-1)),a("div",w,[o[0]||(o[0]=a("label",{for:"file",class:"text-sm font-semibold text-gray-600"}," Chọn file sheet cần update ",-1)),a("input",{ref_key:"fileInput",ref:r,type:"file",onChange:u},null,544),a("button",{class:"rounded-md bg-indigo-600 px-5 py-2 text-sm font-semibold uppercase text-white",onClick:_}," Upload ")]),s(t).text?(i(),c("div",{key:0,class:f([{"text-green-600":s(t).type==="success","text-red-600":s(t).type==="error"},"mt-4"])},g(s(t).text),3)):y("",!0)]))}}),k={class:"mt-5 rounded-md bg-white p-4 shadow-md"},$=d({__name:"Convert",setup(p){const e=x({text:"",type:""}),r=async()=>{const t=await $fetch("/api/data",{method:"POST"});t&&t.success?(e.text="Convert data success",e.type="success"):(e.text="Convert data failed",e.type="error")};return(t,n)=>(i(),c("div",k,[n[0]||(n[0]=a("h2",{class:"mb-4 text-lg font-semibold text-gray-800"}," Bước 2: Convert data từ file upload ở bước 1 ",-1)),a("button",{class:"rounded-md bg-indigo-600 px-5 py-2 text-sm font-semibold uppercase text-white",onClick:r}," Chuyển đổi dữ liệu "),s(e).text?(i(),c("div",{key:0,class:f([{"text-green-600":s(e).type==="success","text-red-600":s(e).type==="error"},"mt-4"])},g(s(e).text),3)):y("",!0)]))}}),B={class:"mt-5 rounded-md bg-white p-4 shadow-md"},T=d({__name:"FetchData",setup(p){const e=x({text:"",type:""}),r=async()=>{e.text="Đang lấy dữ liệu...",e.type="info";try{const t=await $fetch("/api/data/fetch",{method:"POST",body:JSON.stringify({token:"test_token"})});t&&t.success?(e.text="Lấy dữ liệu thành công. Bạn có thể quay về trang chủ để xem dữ liệu.",e.type="success"):(e.text="Lấy dữ liệu thất bại",e.type="error")}catch{e.text="Có lỗi xảy ra khi lấy dữ liệu",e.type="error"}};return(t,n)=>(i(),c("div",B,[n[0]||(n[0]=a("h2",{class:"mb-4 text-lg font-semibold text-gray-800"}," Bước 3: Fetch dữ liệu ",-1)),a("button",{class:"rounded-md bg-indigo-600 px-5 py-2 text-sm font-semibold uppercase text-white",onClick:r}," Lấy dữ liệu từ các nhà thuốc "),s(e).text?(i(),c("div",{key:0,class:f([{"text-green-600":s(e).type==="success","text-red-600":s(e).type==="error"},"mt-4"])},g(s(e).text),3)):y("",!0)]))}}),D={class:"container min-h-screen py-5"},E=d({__name:"upload",setup(p){return b({title:"Trang xử lý thông tin",ogTitle:"Trang xử lý thông tin",description:"Trang web được xây dựng bởi hvduc.com",ogDescription:"Trang web được xây dựng bởi hvduc.com"}),(e,r)=>{const t=C,n=$,u=T;return i(),c("div",D,[m(t),m(n),m(u)])}}});export{E as default};
